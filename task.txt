# Live Speech Translation Project - Task Breakdown

This document outlines the detailed tasks for enhancing the live speech translation system, focusing on UI/UX improvements, dependency management, voice cloning integration, and comprehensive testing.

## Phase 1: Core System Refinement & UI/UX Enhancement

1.  **Update `requirements.txt` for Stability and Performance:**
    *   [x] Align `requirements.txt` with optimized versions and additions from `update.txt`.
    *   [x] Ensure compatibility for Apple Silicon (M1 Pro, 16GB RAM).

2.  **Enhance UI/UX for Clarity and Aesthetics:**
    *   [x] **Visual Design:** Refine `ui/style.css` for a modern, clean aesthetic, improved color palette, typography, spacing, and consistent styling.
    *   [x] **Feedback & Status:** Improve visual feedback for "Listening," "Translating," and "Speaking" states in `ui/index.html` and `ui/script.js`. Make the activity log more prominent.
    *   [x] **Latency Visualization:** Refine `latencyTimelineChart` in `ui/script.js` for real-time X-axis expansion and accurate segment drawing.
    *   [x] **Burger Menu & Sidebar:** Adjust `ui/style.css` and `ui/script.js` for a visually appealing burger menu (hidden by default) and a functional sidebar (`voiceList`) for displaying/selecting voice profiles.
    *   [x] **Voice Configuration Modal:** Ensure `voiceConfigModal` is well-integrated with clear instructions and feedback.

3.  **Backend Core Functionality Adjustments:**
    *   [x] **VAD Tuning:** Review and adjust VAD parameters (`VAD_AGGRESSIVENESS`, `MIN_SPEECH_DURATION`, `SILENCE_TIMEOUT`) in `backend/main.py` for single-speaker optimization and noise reduction.
    *   [x] **Streaming TTS:** Configure `backend/main.py` to send partial TTS outputs for minimal perceived latency.
    *   [x] **Model Initialization:** Ensure `app.py` correctly unpacks initialized models from `backend/main.py` to prevent `ValueError`s.

## Phase 2: Voice Cloning Integration (F5-TTS) & Advanced Features

4.  **Integrate F5-TTS for Voice Cloning:**
    *   [x] **Dependency Management:** Add F5-TTS installation commands and dependencies to `requirements.txt` (commented out initially).
    *   [x] **Backend Logic:** Implement F5-TTS model loading, speaker embedding generation from 10-15 second audio samples, and real-time TTS inference in `backend/tts/xtts_tts.py` (or a new F5-TTS module).
    *   [x] **Speaker Voice Management:** Implement backend endpoints and logic to store recorded/uploaded speaker WAVs in `speaker_voices`, generate/save persistent speaker embeddings, list available voices, and allow frontend selection.

5.  **Robust Multi-language Support:**
    *   [x] Ensure UI language selection (`inputLanguageSelect`, `outputLanguageSelect`) dynamically switches `CTranslate2MT` and `PiperTTS` (and F5-TTS) models in the backend.

## Phase 3: Comprehensive Testing & Deployment Considerations

6.  **Develop Comprehensive Testing Framework:**
    *   [x] Extend `test/streaming_pipeline_tests.py` to include tests for streaming TTS latency/quality, multi-language switching, and voice cloning workflow.
    *   [x] Use pre-recorded audio for reproducibility and provide clear metrics (WER, BLEU, latency breakdown).
    *   [x] **NOTE:** For full testing, actual `.wav` audio files for `test/slovak_test_speech.wav` and `test/My test speech_xtts_speaker_clean.wav` (if different from `test/Voice-Training.wav`) will need to be provided. The current `.wav` files are placeholders.

7.  **Deployment & Packaging Strategy:**
    *   [ ] Focus on local deployment optimization for M1 Pro MacBook.
    *   [ ] (Future Idea) Explore `pip` packaging with `setup.py` for easier installation.
